<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Background Removal Test</title>
<style>
  #input-container {
    margin-bottom: 20px;
  }
  #result-image {
    max-width: 100%;
    height: auto;
  }
</style>
</head>
<body>
<div id="input-container">
  <input type="file" id="image-input" accept="image/*">
</div>
<div id="result-container">
  <h2>Result</h2>
  <img id="result-image" src="" alt="Background Removed Image">
</div>
<script>
document.getElementById('image-input').addEventListener('change', function(event) {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function() {
      const imageUrl = reader.result;
      removeBackground(imageUrl);
    };
    reader.readAsDataURL(file);
  }
});

function removeBackground(imageUrl) {
  fetch('@imgly/background-removal', {
    method: 'POST',
    body: JSON.stringify({ image_src: imageUrl }),
    headers: {
      'Content-Type': 'application/json'
    },
  })
  .then(response => response.blob())
  .then(blob => {
    const resultImageUrl = URL.createObjectURL(blob);
    displayResultImage(resultImageUrl);
  })
  .catch(error => {
    console.error('Error removing background:', error);
  });
}

function displayResultImage(imageUrl) {
  const resultImage = document.getElementById('result-image');
  resultImage.src = imageUrl;
}
</script>
</body>
</html>
